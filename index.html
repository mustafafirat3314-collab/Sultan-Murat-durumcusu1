<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sultan Murat DÃ¼rÃ¼mcÃ¼sÃ¼</title>
    
    <link rel="apple-touch-icon" href="https://img.icons8.com/ios-filled/150/c0392b/s.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        :root { --ana: #ba4a00; --acik: #fdf2e9; --yesil: #27ae60; --kirmizi: #c0392b; --mavi: #2980b9; --turuncu: #d35400; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--acik); margin: 0; padding: 10px; padding-bottom: 120px; -webkit-tap-highlight-color: transparent; }
        
        header { background: var(--ana); color: white; text-align: center; padding: 25px 15px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .logo-circle { width: 60px; height: 60px; background: white; color: var(--kirmizi); border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; border: 3px solid var(--kirmizi); }
        
        .category-title { color: var(--ana); font-weight: bold; margin: 25px 5px 10px; font-size: 1.1rem; border-left: 4px solid var(--ana); padding-left: 10px; }
        .section { background: white; border-radius: 18px; padding: 10px 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #f2f2f2; }
        .item:last-child { border-bottom: none; }
        
        .add-btn { background: var(--yesil); color: white; width: 38px; height: 38px; border-radius: 10px; border: none; font-size: 22px; font-weight: bold; cursor: pointer; }
        .extra-btn { background: var(--mavi); color: white; padding: 8px 10px; border-radius: 8px; border: none; font-size: 10px; font-weight: bold; margin-right: 5px; cursor: pointer; }
        .pors-btn { background: var(--turuncu); color: white; padding: 8px 10px; border-radius: 8px; border: none; font-size: 10px; font-weight: bold; margin-right: 5px; cursor: pointer; }

        #cart-panel { position: fixed; bottom: 0; left: 0; right: 0; background: white; z-index: 10000; border-radius: 25px 25px 0 0; box-shadow: 0 -5px 30px rgba(0,0,0,0.2); transition: 0.4s ease-in-out; transform: translateY(calc(100% - 75px)); }
        #cart-panel.open { transform: translateY(0); }
        .cart-header { height: 75px; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; cursor: pointer; }
        .cart-content { padding: 20px; max-height: 70vh; overflow-y: auto; }
        .cart-item { margin-bottom: 15px; border-bottom: 1px dashed #eee; padding-bottom: 10px; }
        
        .item-note-input { width: 100%; padding: 10px; margin-top: 8px; border: 1px solid #eee; border-radius: 8px; font-size: 13px; box-sizing: border-box; background: #fafafa; }
        .wa-btn { background: #25D366; color: white; width: 100%; padding: 18px; border-radius: 15px; border: none; font-size: 1.1rem; font-weight: bold; margin-top: 15px; }
        input[type="text"], textarea { width: 100%; padding: 12px; margin-top: 10px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; }
    </style>
</head>
<body>

<header>
    <div class="logo-circle">S</div>
    <h1>SULTAN MURAT DÃœRÃœMCÃœSÃœ</h1>
    <p>Damaklarda Taht Kuran Lezzetler</p>
</header>

<div id="menu-container"></div>

<div id="cart-panel">
    <div class="cart-header" onclick="toggleCart()">
        <span style="font-weight: bold; color: var(--ana);">ðŸ›’ SEPETÄ°M (<span id="urun-adet">0</span>)</span>
        <span style="font-weight: 900; font-size: 1.3rem; color: var(--yesil);" id="panel-toplam">0 TL</span>
    </div>
    <div class="cart-content">
        <div id="cart-items-list"></div>
        <input type="text" id="musteri-ad" placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z">
        <textarea id="musteri-adres" rows="2" placeholder="Teslimat Adresiniz"></textarea>
        <div style="display:flex; justify-content:space-between; margin-top:20px; font-size:1.4rem; font-weight:bold; border-top: 1px solid #eee; padding-top:10px;">
            <span>TOPLAM:</span>
            <span id="toplam-fiyat">0</span><span> TL</span>
        </div>
        <button class="wa-btn" onclick="siparisGonder()">WhatsApp'a GÃ¶nder</button>
    </div>
</div>

<script>
    const menu = [
        { c: "Ã‡ORBALAR", i: [
            { id: 1, n: "Mercimek Ã‡orba", p: 90, noNote: false },
            { id: 2, n: "Az Mercimek Ã‡orba", p: 50, noNote: false }
        ]},
        { c: "DÃœRÃœMLER", i: [
            { id: 3, n: "Adana DÃ¼rÃ¼m", p: 200, duble: 400 },
            { id: 4, n: "Urfa DÃ¼rÃ¼m", p: 200, duble: 400 },
            { id: 5, n: "Et DÃ¼rÃ¼m (ÅžiÅŸ)", p: 220, duble: 440 },
            { id: 6, n: "Tavuk DÃ¼rÃ¼m", p: 200, duble: 400 }
        ]},
        { c: "PORSÄ°YONLAR", i: [
            { id: 7, n: "Adana Porsiyon", p: 400, bucuk: 600 },
            { id: 8, n: "Urfa Porsiyon", p: 400, bucuk: 600 },
            { id: 9, n: "Et ÅžiÅŸ Porsiyon", p: 440, bucuk: 660 },
            { id: 10, n: "Tavuk Porsiyon", p: 400, bucuk: 600 },
            { id: 11, n: "Kanat Porsiyon", p: 400, bucuk: 600 },
            { id: 12, n: "KarÄ±ÅŸÄ±k Izgara", p: 950 }
        ]},
        { c: "TATLI VE BAKLAVA", i: [
            { id: 13, n: "FÄ±stÄ±klÄ± Baklava (1 KG)", p: 800, isKg: true },
            { id: 14, n: "Cevizli Baklava (1 KG)", p: 600, isKg: true },
            { id: 15, n: "Halka TatlÄ±sÄ±", p: 25 },
            { id: 16, n: "Tulumba (1 KG)", p: 250, isKg: true }
        ]},
        { c: "Ä°Ã‡ECEKLER", i: [
            { id: 17, n: "Su", p: 15, noNote: true },
            { id: 18, n: "KÃ¼Ã§Ã¼k Ayran", p: 30, noNote: true },
            { id: 19, n: "BÃ¼yÃ¼k Ayran", p: 40, noNote: true },
            { id: 20, n: "Kutu Kola/Fanta", p: 60, noNote: true },
            { id: 21, n: "ÅžiÅŸe Kola", p: 50, noNote: true },
            { id: 22, n: "1 Litre Kola", p: 90, noNote: true },
            { id: 23, n: "Soda", p: 30, noNote: true }
        ]}
    ];

    let cart = {}; 

    function renderMenu() {
        let html = "";
        menu.forEach(cat => {
            html += `<div class="category-title">${cat.c}</div><div class="section">`;
            cat.i.forEach(item => {
                html += `<div class="item">
                    <div style="flex:1"><b>${item.n}</b><br><span style="color:var(--ana)">${item.p} TL</span></div>
                    <div style="display:flex; align-items:center;">
                        ${item.duble ? `<button class="extra-btn" onclick="addToCart(${item.id}, 'duble')">Duble</button>` : ''}
                        ${item.bucuk ? `<button class="pors-btn" onclick="addToCart(${item.id}, 'bucuk')">1.5 Por.</button>` : ''}
                        <button class="add-btn" onclick="addToCart(${item.id}, 'normal')">+</button>
                    </div>
                </div>`;
            });
            html += `</div>`;
        });
        document.getElementById('menu-container').innerHTML = html;
    }

    function addToCart(id, type) {
        const itm = menu.flatMap(c => c.i).find(x => x.id === id);
        let finalName = itm.n;
        let finalPrice = itm.p;
        const cartId = id + "_" + type;

        if(type === 'duble') { finalName = "Duble " + itm.n; finalPrice = itm.duble; }
        if(type === 'bucuk') { finalName = "1.5 " + itm.n; finalPrice = itm.bucuk; }

        if (!cart[cartId]) {
            cart[cartId] = { n: finalName, p: finalPrice, qty: 1, note: "", noNote: itm.noNote, isKg: itm.isKg };
        } else {
            cart[cartId].qty += itm.isKg ? 0.5 : 1;
        }
        updateUI();
    }

    function toggleCart() { document.getElementById('cart-panel').classList.toggle('open'); }

    function changeQty(cid, val, isKg) {
        if (cart[cid]) {
            cart[cid].qty += val;
            if (cart[cid].qty <= 0) delete cart[cid];
            updateUI();
        }
    }

    function updateUI() {
        const list = document.getElementById('cart-items-list');
        list.innerHTML = "";
        let total = 0, count = 0;
        Object.keys(cart).forEach(cid => {
            const i = cart[cid];
            let sum = i.p * i.qty;
            total += sum; count++;
            list.innerHTML += `<div class="cart-item">
                <div style="display:flex; justify-content:space-between; font-weight:bold;"><span>${i.n}</span><span>${sum} TL</span></div>
                <div style="display:flex; justify-content:space-between; align-items:center; margin-top:5px;">
                    <small>Miktar: ${i.qty} ${i.isKg ? 'Kg' : 'Adet'}</small>
                    <div>
                        <button onclick="changeQty('${cid}', ${i.isKg ? -0.5 : -1}, ${i.isKg})" style="width:30px">-</button>
                        <button onclick="changeQty('${cid}', ${i.isKg ? 0.5 : 1}, ${i.isKg})" style="width:30px">+</button>
                    </div>
                </div>
                ${!i.noNote ? `<input type="text" class="item-note-input" placeholder="Not (Ã–rn: SoÄŸansÄ±z, bol fÄ±stÄ±klÄ± vb.)" oninput="cart['${cid}'].note = this.value" value="${i.note}">` : ''}
            </div>`;
        });
        document.getElementById('toplam-fiyat').innerText = total;
        document.getElementById('panel-toplam').innerText = total + " TL";
        document.getElementById('urun-adet').innerText = count;
    }

    function siparisGonder() {
        const ad = document.getElementById('musteri-ad').value;
        const adr = document.getElementById('musteri-adres').value;
        if (!ad || !adr || Object.keys(cart).length === 0) { alert("Bilgileri doldurun!"); return; }
        let msg = `*SULTAN MURAT DÃœRÃœMCÃœSÃœ*%0AðŸ‘¤ *${ad}*%0AðŸ“ *${adr}*%0A%0A`;
        Object.values(cart).forEach(i => {
            msg += `âœ… ${i.qty} ${i.isKg?'Kg':'Adet'} ${i.n}${i.note ? ' ('+i.note+')' : ''}%0A`;
        });
        msg += `%0A*TOPLAM: ${document.getElementById('toplam-fiyat').innerText} TL*`;
        window.open(`https://wa.me/905466122000?text=${msg}`);
    }
    renderMenu();
</script>
</body>
</html>
